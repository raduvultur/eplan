{"filter":false,"title":"directives.js","tooltip":"/www/js/directives/directives.js","undoManager":{"mark":9,"position":9,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":16,"column":3},"end":{"row":17,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":0},"end":{"row":18,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":0},"end":{"row":18,"column":48}},"text":".directive('headerShrink', function($document) {"},{"action":"insertText","range":{"start":{"row":18,"column":48},"end":{"row":19,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":19,"column":0},"end":{"row":48,"column":0}},"lines":["var fadeAmt;","var shrink = function(header, content, amt, max) {","amt = Math.min(max, amt);","fadeAmt = 1 - amt / max;","ionic.requestAnimationFrame(function() {","header.style[ionic.CSS.TRANSFORM] = 'translate3d(0, -' + amt + 'px, 0)';","for(var i = 0, j = header.children.length; i < j; i++) {","header.children[i].style.opacity = fadeAmt;","}","});","};","return {","restrict: 'A',","link: function($scope, $element, $attr) {","var starty = $scope.$eval($attr.headerShrink) || 0;","var shrinkAmt;","var header = $document[0].body.querySelector('.bar-header');","var headerHeight = header.offsetHeight;","$element.bind('scroll', function(e) {","if(e.detail.scrollTop > starty) {","// Start shrinking","shrinkAmt = headerHeight - Math.max(0, (starty + headerHeight) - e.detail.scrollTop);","shrink(header, $element[0], shrinkAmt, headerHeight);","} else {","shrink(header, $element[0], 0, headerHeight);","}","});","}","}"]},{"action":"insertText","range":{"start":{"row":48,"column":0},"end":{"row":48,"column":2}},"text":"})"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":0},"end":{"row":18,"column":21}},"text":"angular.module('App')"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":48,"column":2},"end":{"row":48,"column":3}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":0},"end":{"row":19,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":20,"column":0},"end":{"row":20,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":21,"column":0},"end":{"row":21,"column":8}},"text":"        "},{"action":"insertText","range":{"start":{"row":22,"column":0},"end":{"row":22,"column":8}},"text":"        "},{"action":"insertText","range":{"start":{"row":23,"column":0},"end":{"row":23,"column":8}},"text":"        "},{"action":"insertText","range":{"start":{"row":24,"column":0},"end":{"row":24,"column":12}},"text":"            "},{"action":"insertText","range":{"start":{"row":25,"column":0},"end":{"row":25,"column":12}},"text":"            "},{"action":"insertText","range":{"start":{"row":25,"column":15},"end":{"row":25,"column":16}},"text":" "},{"action":"insertText","range":{"start":{"row":26,"column":0},"end":{"row":26,"column":16}},"text":"                "},{"action":"insertText","range":{"start":{"row":27,"column":0},"end":{"row":27,"column":12}},"text":"            "},{"action":"insertText","range":{"start":{"row":28,"column":0},"end":{"row":28,"column":8}},"text":"        "},{"action":"insertText","range":{"start":{"row":29,"column":0},"end":{"row":29,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":30,"column":0},"end":{"row":30,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":31,"column":0},"end":{"row":31,"column":8}},"text":"        "},{"action":"insertText","range":{"start":{"row":32,"column":0},"end":{"row":32,"column":8}},"text":"        "},{"action":"insertText","range":{"start":{"row":33,"column":0},"end":{"row":33,"column":12}},"text":"            "},{"action":"insertText","range":{"start":{"row":34,"column":0},"end":{"row":34,"column":12}},"text":"            "},{"action":"insertText","range":{"start":{"row":35,"column":0},"end":{"row":35,"column":12}},"text":"            "},{"action":"insertText","range":{"start":{"row":36,"column":0},"end":{"row":36,"column":12}},"text":"            "},{"action":"insertText","range":{"start":{"row":37,"column":0},"end":{"row":37,"column":12}},"text":"            "},{"action":"insertText","range":{"start":{"row":38,"column":0},"end":{"row":38,"column":16}},"text":"                "},{"action":"insertText","range":{"start":{"row":38,"column":18},"end":{"row":38,"column":19}},"text":" "},{"action":"insertText","range":{"start":{"row":39,"column":0},"end":{"row":39,"column":20}},"text":"                    "},{"action":"insertText","range":{"start":{"row":40,"column":0},"end":{"row":40,"column":20}},"text":"                    "},{"action":"insertText","range":{"start":{"row":41,"column":0},"end":{"row":41,"column":20}},"text":"                    "},{"action":"insertText","range":{"start":{"row":42,"column":0},"end":{"row":42,"column":16}},"text":"                "},{"action":"insertText","range":{"start":{"row":42,"column":17},"end":{"row":43,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":43,"column":0},"end":{"row":43,"column":15}},"text":"               "},{"action":"insertText","range":{"start":{"row":44,"column":0},"end":{"row":44,"column":20}},"text":"                    "},{"action":"insertText","range":{"start":{"row":45,"column":0},"end":{"row":45,"column":16}},"text":"                "},{"action":"insertText","range":{"start":{"row":46,"column":0},"end":{"row":46,"column":12}},"text":"            "},{"action":"insertText","range":{"start":{"row":47,"column":0},"end":{"row":47,"column":8}},"text":"        "},{"action":"insertText","range":{"start":{"row":48,"column":0},"end":{"row":48,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":49,"column":0},"end":{"row":49,"column":3}},"text":"});"},{"action":"removeLines","range":{"start":{"row":18,"column":0},"end":{"row":49,"column":0}},"nl":"\n","lines":["angular.module('App').directive('headerShrink', function($document) {","    var fadeAmt;","    var shrink = function(header, content, amt, max) {","        amt = Math.min(max, amt);","        fadeAmt = 1 - amt / max;","        ionic.requestAnimationFrame(function() {","            header.style[ionic.CSS.TRANSFORM] = 'translate3d(0, -' + amt + 'px, 0)';","            for (var i = 0, j = header.children.length; i < j; i++) {","                header.children[i].style.opacity = fadeAmt;","            }","        });","    };","    return {","        restrict: 'A',","        link: function($scope, $element, $attr) {","            var starty = $scope.$eval($attr.headerShrink) || 0;","            var shrinkAmt;","            var header = $document[0].body.querySelector('.bar-header');","            var headerHeight = header.offsetHeight;","            $element.bind('scroll', function(e) {","                if (e.detail.scrollTop > starty) {","                    // Start shrinking","                    shrinkAmt = headerHeight - Math.max(0, (starty + headerHeight) - e.detail.scrollTop);","                    shrink(header, $element[0], shrinkAmt, headerHeight);","                }","                else {","                    shrink(header, $element[0], 0, headerHeight);","                }","            });","        }","    }"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":17,"column":0},"end":{"row":18,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":0},"end":{"row":18,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":0},"end":{"row":18,"column":71}},"text":"angular.module('App').directive('emitLastRepeaterElement', function() {"},{"action":"insertText","range":{"start":{"row":18,"column":71},"end":{"row":19,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":19,"column":0},"end":{"row":24,"column":0}},"lines":["  return function(scope) {","    if (scope.$last){","      scope.$emit('LastRepeaterElement');","    }","  };"]},{"action":"insertText","range":{"start":{"row":24,"column":0},"end":{"row":24,"column":3}},"text":"});"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":24,"column":3},"end":{"row":24,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1411035876005,"hash":"939d58916fc0bba4214a8b7574b0e68c9b8fcd86"}